import pygame as pg
from math import sqrt
import numpy as np

class Player:

    size = (15,15)
    reticlesize = (3, 3)

    health = 100
    damage = 20
    speed = 1

    #lists waypoint vectors where the player moves towards the first element of the list at all times
    path = []
    
    def __init__(self, x, y):
        self.hitbox = pg.Rect(x, y, self.size[0], self.size[1])
        self.reticle = pg.Rect(x, y, self.reticlesize[0], self.reticlesize[1])
        
        #we store position separately
        self.position = pg.Vector2(self.hitbox.center)
        self.target = pg.Vector2(self.hitbox.center)

    def draw(self, surface):
        pg.draw.ellipse(surface, "cyan", self.hitbox)

        if not self.reticle.colliderect(self.hitbox):
            pg.draw.ellipse(surface, "darkred", self.reticle)

    #user input
    def process_user_input(self, mouse_screen_coords):
        pg.event.pump()
        Mouse_L, Mouse_M, Mouse_R = pg.mouse.get_pressed()
        

        if Mouse_R:
            self.target = pg.Vector2(mouse_screen_coords)
            self.reticle.center = mouse_screen_coords
            self.path = self.pathfind()
    
    #will simply target location, unless in wall, will target nearest possible location
    def pathfind(self):

        #if i'm going to put in proper pathfinding, it would go here
        return [self.target]

    def update(self):
        if not len(self.path) == 0:
            if not self.path[0] == self.position:
                direction = pg.Vector2(self.path[0][0] - self.position[0], self.path[0][1] - self.position[1]).normalize()
            else:
                direction = pg.Vector2((0,0))

            #this if/else stops jittering when arriving at any waypoint
            if ((self.path[0] - self.position).magnitude() > self.speed):
                self.position += self.speed * direction
            else:
                self.position = self.path[0]


                #remove completed waypoint from path
                del self.path[0]
            self.hitbox.center = (round(self.position[0]), round(self.position[1]))

    
def drawterrain(terrain, surface):
    for elem in terrain:
        pg.draw.rect(surface, "green", elem)

def read_student_input():
    with open('student_input.txt', 'r+') as f:
        for line in f:
            print(line)
        f.seek(0)
        f.truncate()


MapGraph={(2280, 1570): [(2320, 1550), (2260, 1520), (2220, 1540), (2400, 1570), (2420, 1540), (2420, 1520), (2440, 1510), (2420, 1580), (2200, 1590), (2160, 1610), (2260, 1620), (2040, 1710), (2000, 1710)], (2320, 1550): [(2280, 1570), (2320, 1550), (2260, 1520), (2220, 1540), (2400, 1570), (2420, 1540), (2420, 1520), (2440, 1510), (2480, 1550), (2420, 1580), (2420, 1460), (2420, 1440), (2400, 1450), (2360, 1450), (2260, 1620), (2040, 1710), (2000, 1710)], (2260, 1520): [(2280, 1570), (2320, 1550), (2220, 1540), (2400, 1570), (2420, 1540), (2420, 1520), (2440, 1510), (2420, 1580), (2440, 1450), (2420, 1460), (2420, 1440), (2400, 1450), (2360, 1450)], (2220, 1540): [(2280, 1570), (2320, 1550), (2260, 1520), (2420, 1440), (2400, 1450), (2360, 1450), (2200, 1590), (2260, 1620)], (2020, 1460): [(1980, 1440), (2060, 1440), (2180, 1380), (2140, 1400), (2540, 1340), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2480, 1370), (2360, 1350), (2400, 1370), (2020, 1500), (1920, 1430), (1920, 1410), (2260, 1380), (2040, 1710)], (1980, 1440): [(2020, 1460), (2060, 1420), (2060, 1440), (2140, 1400), (2080, 1530), (2400, 1370), (2020, 1500), (1920, 1430), (1920, 1410), (1940, 1380)], (1980, 1420): [(2020, 1400), (2060, 1420), (2060, 1440), (2060, 1380), (2100, 1360), (1920, 1430), (1920, 1410), (1940, 1380), (2020, 1340), (2080, 1330), (2120, 1330)], (2020, 1400): [(1980, 1420), (2020, 1400), (2060, 1420), (2060, 1380), (2100, 1360), (2140, 1400), (2100, 1400), (2320, 1410), (2340, 1400), (1920, 1430), (1920, 1410), (1940, 1380), (2020, 1340), (2080, 1330), (2120, 1330)], (2060, 1420): [(1980, 1440), (1980, 1420), (2020, 1400), (2060, 1420), (2060, 1440), (2140, 1400), (2120, 1390), (2100, 1400), (2080, 1530), (2320, 1410), (2340, 1400), (2440, 1390), (2480, 1370), (2400, 1370), (2020, 1340), (2260, 1380)], (2060, 1440): [(2020, 1460), (1980, 1440), (1980, 1420), (2060, 1420), (2060, 1440), (2140, 1360), (2180, 1380), (2140, 1400), (2120, 1390), (2100, 1400), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2480, 1370), (2360, 1350), (2400, 1370), (2020, 1500), (2260, 1380), (2000, 1710)], (2060, 1380): [(1980, 1420), (2020, 1400), (2060, 1420), (2060, 1440), (2100, 1360), (2180, 1380), (2120, 1390), (2100, 1400), (2080, 1530), (1920, 1430), (1920, 1410), (1940, 1380), (2020, 1340), (2080, 1330), (2120, 1330), (2260, 1380)], (2100, 1360): [(1980, 1420), (2020, 1400), (2060, 1380), (2140, 1360), (2140, 1400), (2120, 1390), (1920, 1430), (1920, 1410), (1940, 1380), (2020, 1340), (2080, 1330), (2120, 1330)], (2140, 1360): [(2060, 1440), (2100, 1360), (2180, 1380), (2120, 1390), (2100, 1400), (2320, 1410), (2340, 1400), (2540, 1440), (2020, 1340), (2080, 1330), (2120, 1330), (2260, 1380)], (2180, 1380): [(2020, 1460), (2060, 1440), (2060, 1380), (2140, 1360), (2180, 1380), (2140, 1400), (2120, 1390), (2660, 1500), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2420, 1440), (2440, 1390), (2020, 1500), (1940, 1380), (2080, 1330), (2120, 1330), (2260, 1380)], (2140, 1400): [(2020, 1460), (1980, 1440), (2020, 1400), (2060, 1420), (2060, 1440), (2100, 1360), (2180, 1380), (2140, 1400), (2120, 1390), (2100, 1400), (2580, 1360), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2440, 1390), (2480, 1370), (2400, 1370), (2020, 1500), (2260, 1380)], (2120, 1390): [(2060, 1420), (2060, 1440), (2060, 1380), (2100, 1360), (2140, 1360), (2180, 1380), (2140, 1400), (2120, 1390), (2100, 1400), (2040, 1550), (2080, 1530), (2020, 1500), (2080, 1330)], (2100, 1400): [(2020, 1400), (2060, 1420), (2060, 1440), (2060, 1380), (2140, 1360), (2140, 1400), (2120, 1390), (2100, 1400), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2020, 1500), (1940, 1380)], (2400, 1570): [(2280, 1570), (2320, 1550), (2260, 1520), (2420, 1540), (2420, 1520), (2480, 1530), (2480, 1550), (2420, 1580), (2520, 1510), (2540, 1500), (2420, 1460), (2600, 1470), (2760, 1390), (2420, 1440), (2400, 1450), (2360, 1450), (2200, 1590), (2160, 1610), (3080, 1230), (3060, 1240), (2920, 1310), (2820, 1360), (2260, 1620), (2000, 1710)], (2420, 1540): [(2280, 1570), (2320, 1550), (2260, 1520), (2400, 1570), (2480, 1530), (2480, 1550), (2400, 1450), (2360, 1450), (2200, 1590), (2160, 1610), (2260, 1620), (2040, 1710), (2000, 1710)], (2420, 1520): [(2280, 1570), (2320, 1550), (2260, 1520), (2400, 1570), (2440, 1510), (2480, 1530), (2480, 1550), (2400, 1450), (2360, 1450), (2500, 1560), (2260, 1620), (2040, 1710), (2000, 1710)], (2440, 1510): [(2280, 1570), (2320, 1550), (2260, 1520), (2420, 1520), (2440, 1510), (2480, 1530), (2520, 1510), (2420, 1460), (2400, 1450), (2360, 1450), (2560, 1510), (2520, 1530), (2040, 1710), (2000, 1710)], (2480, 1530): [(2400, 1570), (2420, 1540), (2420, 1520), (2440, 1510), (2480, 1530), (2480, 1550), (2520, 1510), (2540, 1500), (2420, 1460), (2600, 1470), (2760, 1390), (2400, 1450), (2360, 1450), (3080, 1230), (3060, 1240), (2920, 1310), (2820, 1360), (2560, 1510), (2520, 1530), (2500, 1560)], (2480, 1550): [(2320, 1550), (2400, 1570), (2420, 1540), (2420, 1520), (2480, 1530), (2480, 1550), (2420, 1580), (2520, 1510), (2540, 1500), (2600, 1470), (2720, 1350), (2740, 1340), (2560, 1510), (2520, 1530), (2500, 1560)], (2420, 1580): [(2280, 1570), (2320, 1550), (2260, 1520), (2400, 1570), (2480, 1550), (2420, 1580), (2200, 1590), (2160, 1610), (2560, 1510), (2520, 1530), (2500, 1560), (2260, 1620)], (2520, 1510): [(2400, 1570), (2440, 1510), (2480, 1530), (2480, 1550), (2540, 1500), (2440, 1450), (2420, 1460), (2600, 1470), (2760, 1390), (2660, 1500), (2320, 1410), (2400, 1450), (2360, 1450), (2260, 1380), (3080, 1230), (3060, 1240), (2920, 1310), (2820, 1360), (3020, 1480), (2560, 1510), (2500, 1560)], (2540, 1500): [(2400, 1570), (2480, 1530), (2480, 1550), (2520, 1510), (2540, 1500), (2440, 1450), (2420, 1460), (2600, 1470), (2760, 1390), (2660, 1500), (2340, 1400), (2420, 1440), (2440, 1390), (2720, 1350), (2540, 1440), (2360, 1350), (2400, 1370), (2740, 1340), (2900, 1280), (2940, 1280), (2980, 1260), (3080, 1210), (3040, 1230), (2280, 1370), (3080, 1230), (3060, 1240), (2920, 1310), (2820, 1360), (2840, 1570), (2780, 1580), (2560, 1510), (2520, 1530), (2500, 1560)], (2440, 1450): [(2260, 1520), (2520, 1510), (2540, 1500), (2440, 1450), (2420, 1460), (2600, 1470), (2660, 1500), (2340, 1400), (2420, 1440), (2400, 1450), (2360, 1450), (2540, 1440), (2360, 1350), (2400, 1370), (2280, 1370), (2840, 1570), (2780, 1580), (2560, 1510)], (2420, 1460): [(2320, 1550), (2260, 1520), (2400, 1570), (2440, 1510), (2480, 1530), (2520, 1510), (2540, 1500), (2440, 1450), (2320, 1410), (2400, 1450), (2360, 1450), (2440, 1390), (2260, 1380), (2780, 1580), (2520, 1530), (2260, 1620)], (2540, 1340): [(2020, 1460), (2580, 1320), (2600, 1330), (2600, 1350), (2580, 1360), (2640, 1290), (2640, 1270), (2340, 1400), (2440, 1390), (2480, 1370), (2520, 1390), (2700, 1340), (2600, 1250), (2460, 1340), (2400, 1370), (2740, 1340), (2620, 1240)], (2580, 1320): [(2540, 1340), (2600, 1330), (2640, 1290), (2640, 1270), (2660, 1300), (2340, 1400), (2440, 1390), (2480, 1370), (2700, 1340), (2600, 1250), (2460, 1340), (2400, 1370), (2720, 1330), (2740, 1340), (2620, 1240), (1980, 1520), (2020, 1500), (2820, 1360)], (2600, 1330): [(2540, 1340), (2580, 1320), (2600, 1330), (2600, 1350), (2640, 1290), (2640, 1270), (2700, 1280), (2660, 1300), (2700, 1340), (2600, 1250), (2720, 1330), (2740, 1340), (2940, 1160), (2620, 1240), (2760, 1250)], (2600, 1350): [(2540, 1340), (2600, 1330), (2600, 1350), (2580, 1360), (2640, 1290), (2640, 1270), (2700, 1280), (2660, 1300), (2520, 1390), (2700, 1340), (2600, 1250), (2720, 1330), (2620, 1240), (2760, 1250)], (2580, 1360): [(2140, 1400), (2540, 1340), (2600, 1350), (2580, 1360), (2480, 1370), (2520, 1390), (2700, 1340), (2460, 1340), (2400, 1370), (2720, 1330), (2260, 1380)], (2640, 1290): [(2540, 1340), (2580, 1320), (2600, 1330), (2600, 1350), (2700, 1280), (2660, 1300), (2820, 1420), (2340, 1400), (2440, 1390), (2480, 1370), (2700, 1340), (2720, 1350), (2600, 1250), (2460, 1340), (2400, 1370), (2720, 1330), (2740, 1340), (2600, 1230), (2620, 1240), (1980, 1520), (2020, 1500), (3020, 1480)], (2640, 1270): [(2540, 1340), (2580, 1320), (2600, 1330), (2600, 1350), (2660, 1260), (2700, 1280), (2340, 1400), (2440, 1390), (2480, 1370), (2580, 1240), (2600, 1250), (2460, 1340), (2400, 1370), (2420, 1160), (2520, 1210), (2600, 1230), (2620, 1240), (2700, 1240), (1820, 1620)], (2660, 1260): [(2640, 1270), (2660, 1260), (2700, 1280), (2340, 1400), (2580, 1240), (2600, 1250), (2460, 1340), (2400, 1370), (2520, 1210), (2600, 1230), (2620, 1240), (2700, 1240), (2760, 1250), (1820, 1620), (2180, 1140), (2180, 1120)], (2700, 1280): [(2600, 1330), (2600, 1350), (2640, 1290), (2640, 1270), (2660, 1260), (2700, 1280), (2660, 1300), (2700, 1340), (2720, 1350), (2720, 1330), (2980, 1260), (2940, 1160), (2600, 1230), (2620, 1240), (2700, 1240), (2760, 1250)], (2660, 1300): [(2580, 1320), (2600, 1330), (2600, 1350), (2640, 1290), (2700, 1280), (2660, 1300), (2820, 1420), (2700, 1340), (2720, 1350), (2460, 1340), (2720, 1330), (2740, 1340), (2940, 1160), (2760, 1250), (3020, 1480)], (2600, 1470): [(2400, 1570), (2480, 1530), (2480, 1550), (2520, 1510), (2540, 1500), (2440, 1450), (2760, 1390), (2820, 1420), (2660, 1500), (2340, 1400), (2420, 1440), (2440, 1390), (2720, 1350), (2540, 1440), (2360, 1350), (2400, 1370), (2740, 1340), (2900, 1280), (2940, 1280), (2980, 1260), (3080, 1210), (3040, 1230), (2280, 1370), (3080, 1230), (3060, 1240), (2920, 1310), (2820, 1360), (2780, 1580), (2560, 1510), (2520, 1530)], (2760, 1390): [(2400, 1570), (2480, 1530), (2520, 1510), (2540, 1500), (2600, 1470), (2760, 1390), (2820, 1420), (2660, 1500), (2720, 1350), (2540, 1440), (2720, 1330), (2740, 1340), (2900, 1280), (2940, 1280), (2980, 1260), (3080, 1210), (3040, 1230), (3080, 1230), (3060, 1240), (2920, 1310), (2820, 1360), (2880, 1390), (3020, 1460), (3020, 1480)], (2820, 1420): [(2640, 1290), (2660, 1300), (2600, 1470), (2760, 1390), (2820, 1420), (2660, 1500), (2720, 1350), (2720, 1330), (2740, 1340), (2880, 1390), (3020, 1460), (3020, 1480), (2840, 1570), (2780, 1580)], (2660, 1500): [(2180, 1380), (2520, 1510), (2540, 1500), (2440, 1450), (2600, 1470), (2760, 1390), (2820, 1420), (2660, 1500), (2340, 1400), (2420, 1440), (2440, 1390), (2540, 1440), (2360, 1350), (2400, 1370), (2280, 1370), (2880, 1390), (3020, 1460), (3020, 1480), (2840, 1570), (2780, 1580), (2560, 1510)], (2040, 1550): [(2020, 1460), (2060, 1440), (2180, 1380), (2140, 1400), (2120, 1390), (2100, 1400), (2080, 1530), (2320, 1410), (2340, 1400), (2200, 1590), (2160, 1610), (2360, 1350), (2460, 1340), (2400, 1370), (2460, 1240), (2620, 1160), (2520, 1210), (2680, 1150), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (2260, 1380), (2280, 1370), (2000, 1710)], (2080, 1530): [(2020, 1460), (1980, 1440), (2060, 1420), (2060, 1440), (2060, 1380), (2180, 1380), (2140, 1400), (2120, 1390), (2100, 1400), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2200, 1590), (2160, 1610), (2360, 1350), (2460, 1340), (2400, 1370), (2460, 1240), (2620, 1160), (2520, 1210), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (1920, 1430), (1920, 1410), (2260, 1380), (2280, 1370), (2260, 1620)], (2320, 1410): [(2020, 1460), (2020, 1400), (2060, 1420), (2060, 1440), (2140, 1360), (2180, 1380), (2140, 1400), (2100, 1400), (2520, 1510), (2420, 1460), (2040, 1550), (2080, 1530), (2340, 1400), (2420, 1440), (2400, 1450), (2360, 1350), (2460, 1340), (2400, 1370), (2400, 1270), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (2080, 1330), (2120, 1330), (2260, 1380), (2280, 1370), (2340, 1300)], (2340, 1400): [(2020, 1460), (2020, 1400), (2060, 1420), (2060, 1440), (2140, 1360), (2180, 1380), (2140, 1400), (2100, 1400), (2540, 1500), (2440, 1450), (2540, 1340), (2580, 1320), (2640, 1290), (2640, 1270), (2660, 1260), (2600, 1470), (2660, 1500), (2040, 1550), (2080, 1530), (2320, 1410), (2420, 1440), (2400, 1450), (2360, 1450), (2440, 1390), (2480, 1370), (2540, 1440), (2360, 1350), (2460, 1340), (2400, 1370), (2700, 1240), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (2260, 1380), (2280, 1370), (2840, 1570), (2780, 1580), (2560, 1510)], (2420, 1440): [(2320, 1550), (2260, 1520), (2220, 1540), (2180, 1380), (2400, 1570), (2540, 1500), (2440, 1450), (2600, 1470), (2660, 1500), (2320, 1410), (2340, 1400), (2420, 1440), (2400, 1450), (2440, 1390), (2540, 1440), (2360, 1350), (2460, 1340), (2400, 1370), (2280, 1370), (2840, 1570), (2780, 1580), (2560, 1510), (2260, 1620)], (2400, 1450): [(2320, 1550), (2260, 1520), (2220, 1540), (2420, 1540), (2420, 1520), (2440, 1510), (2480, 1530), (2520, 1510), (2440, 1450), (2420, 1460), (2320, 1410), (2340, 1400), (2420, 1440), (2360, 1450), (2540, 1440), (2260, 1380), (2520, 1530)], (2360, 1450): [(2320, 1550), (2260, 1520), (2220, 1540), (2400, 1570), (2420, 1540), (2420, 1520), (2440, 1510), (2480, 1530), (2520, 1510), (2440, 1450), (2420, 1460), (2340, 1400), (2400, 1450), (2520, 1530)], (2200, 1590): [(2280, 1570), (2220, 1540), (2400, 1570), (2420, 1540), (2420, 1580), (2040, 1550), (2080, 1530), (2200, 1590), (2160, 1610), (2020, 1500), (2260, 1620), (2040, 1710), (2000, 1710)], (2160, 1610): [(2280, 1570), (2400, 1570), (2420, 1540), (2420, 1580), (2040, 1550), (2080, 1530), (2200, 1590), (2160, 1610), (1820, 1620), (1820, 1600), (1980, 1520), (2260, 1620), (2040, 1710), (2000, 1710)], (2440, 1390): [(2060, 1420), (2180, 1380), (2140, 1400), (2540, 1500), (2420, 1460), (2540, 1340), (2580, 1320), (2640, 1290), (2640, 1270), (2600, 1470), (2660, 1500), (2340, 1400), (2420, 1440), (2480, 1370), (2520, 1390), (2540, 1440), (2360, 1350), (2600, 1250), (2460, 1340), (2400, 1370), (2620, 1240), (2260, 1380), (2280, 1370), (2780, 1580), (2560, 1510)], (2480, 1370): [(2020, 1460), (2060, 1420), (2060, 1440), (2140, 1400), (2540, 1340), (2580, 1320), (2580, 1360), (2640, 1290), (2640, 1270), (2340, 1400), (2440, 1390), (2480, 1370), (2520, 1390), (2600, 1250), (2460, 1340), (2400, 1370), (2620, 1240), (2260, 1380), (2280, 1370)], (2520, 1390): [(2540, 1340), (2600, 1350), (2580, 1360), (2440, 1390), (2480, 1370), (2520, 1390), (2700, 1340), (2460, 1340), (2720, 1330)], (2700, 1340): [(2540, 1340), (2580, 1320), (2600, 1330), (2600, 1350), (2580, 1360), (2640, 1290), (2660, 1300), (2520, 1390), (2720, 1350), (2540, 1440), (2460, 1340), (2720, 1330), (2740, 1340), (2760, 1250), (2820, 1360), (2880, 1390), (3020, 1460), (3020, 1480)], (2720, 1350): [(2480, 1550), (2540, 1500), (2640, 1290), (2700, 1280), (2660, 1300), (2600, 1470), (2760, 1390), (2820, 1420), (2700, 1340), (2720, 1350), (2540, 1440), (2740, 1340), (2900, 1280), (2940, 1280), (2940, 1240), (3080, 1170), (2700, 1240), (3060, 1260), (2920, 1310), (2820, 1360), (2880, 1390), (3020, 1460), (3020, 1480), (2560, 1510), (2520, 1530)], (2540, 1440): [(2140, 1360), (2540, 1500), (2440, 1450), (2600, 1470), (2760, 1390), (2660, 1500), (2340, 1400), (2420, 1440), (2400, 1450), (2440, 1390), (2700, 1340), (2720, 1350), (2540, 1440), (2360, 1350), (2400, 1370), (2740, 1340), (2900, 1280), (2940, 1280), (2940, 1240), (3080, 1170), (2260, 1380), (2280, 1370), (3080, 1230), (3060, 1240), (3060, 1260), (2920, 1310), (2820, 1360), (2780, 1580), (2560, 1510)], (2360, 1350): [(2020, 1460), (2060, 1440), (2540, 1500), (2440, 1450), (2600, 1470), (2660, 1500), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2420, 1440), (2440, 1390), (2540, 1440), (2580, 1240), (2600, 1250), (2460, 1340), (2400, 1370), (2400, 1270), (2460, 1240), (2340, 1240), (2620, 1160), (2520, 1210), (2680, 1150), (2600, 1230), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (2260, 1380), (2280, 1370), (2340, 1300), (2280, 1070), (2780, 1580), (2560, 1510)], (2580, 1240): [(2640, 1270), (2660, 1260), (2360, 1350), (2580, 1240), (2600, 1250), (2400, 1270), (2460, 1240), (2360, 1190), (2340, 1240), (2420, 1160), (2620, 1160), (2520, 1210), (2660, 1120), (2680, 1150), (2600, 1230), (2620, 1240), (2700, 1240), (2760, 1250), (2740, 980), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (2260, 1380), (2280, 1370), (2340, 1300), (2260, 1240), (2180, 1140), (2180, 1120)], (2600, 1250): [(2540, 1340), (2580, 1320), (2600, 1330), (2600, 1350), (2640, 1290), (2640, 1270), (2660, 1260), (2440, 1390), (2480, 1370), (2360, 1350), (2580, 1240), (2600, 1250), (2460, 1340), (2420, 1160), (2520, 1210), (2620, 1240), (2700, 1240), (2760, 1250)], (2460, 1340): [(2540, 1340), (2580, 1320), (2580, 1360), (2640, 1290), (2640, 1270), (2660, 1260), (2660, 1300), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2420, 1440), (2440, 1390), (2480, 1370), (2520, 1390), (2700, 1340), (2360, 1350), (2600, 1250), (2460, 1340), (2400, 1370), (2740, 1340), (2620, 1240), (2700, 1240)], (2400, 1370): [(2020, 1460), (1980, 1440), (2060, 1420), (2060, 1440), (2140, 1400), (2540, 1500), (2440, 1450), (2540, 1340), (2580, 1320), (2580, 1360), (2640, 1290), (2640, 1270), (2660, 1260), (2600, 1470), (2660, 1500), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2420, 1440), (2440, 1390), (2480, 1370), (2540, 1440), (2360, 1350), (2460, 1340), (2700, 1240), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (2260, 1380), (2280, 1370), (2780, 1580), (2560, 1510)], (2400, 1270): [(2320, 1410), (2360, 1350), (2580, 1240), (2400, 1270), (2460, 1240), (2360, 1190), (2340, 1240), (2620, 1160), (2520, 1210), (2680, 1150), (2600, 1230), (2280, 1370), (2340, 1300), (2260, 1240), (2260, 1220), (2260, 1200)], (2460, 1240): [(2040, 1550), (2080, 1530), (2360, 1350), (2580, 1240), (2400, 1270), (2460, 1240), (2360, 1190), (2340, 1200), (2340, 1220), (2340, 1240), (2420, 1160), (2380, 1080), (2620, 1160), (2520, 1210), (2680, 1150), (2600, 1230), (2620, 1240), (2700, 1240), (2280, 1370), (2340, 1300), (2260, 1240), (2260, 1220), (2280, 1070), (2320, 1070), (2360, 1070)], (2360, 1190): [(2580, 1240), (2400, 1270), (2460, 1240), (2340, 1200), (2420, 1160), (2420, 1140), (2420, 1120), (2380, 1080), (2520, 1210), (2600, 1230), (2620, 1240), (1920, 1410), (2080, 1330), (2260, 1240), (2260, 1220), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070)], (2340, 1200): [(2460, 1240), (2360, 1190), (2420, 1160), (2420, 1140), (2420, 1120), (2380, 1080), (1920, 1410), (2080, 1330), (2260, 1240), (2260, 1220), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070), (2360, 1070)], (2340, 1220): [(2460, 1240), (2260, 1240), (2260, 1220), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070)], (2340, 1240): [(2340, 1400), (2360, 1350), (2580, 1240), (2400, 1270), (2460, 1240), (2620, 1240), (2700, 1240), (2260, 1240), (2260, 1220), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070)], (2420, 1160): [(2640, 1270), (2580, 1240), (2600, 1250), (2460, 1240), (2360, 1190), (2340, 1200), (2380, 1080), (2600, 1130), (2620, 1160), (2520, 1210), (2660, 1120), (1920, 1410), (2080, 1330), (2260, 1240), (2260, 1220), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070), (2360, 1070)], (2420, 1140): [(2360, 1190), (2340, 1200), (2380, 1080), (2600, 1130), (2620, 1160), (2740, 1140), (1940, 1380), (2020, 1340), (2260, 1240), (2260, 1220), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070), (2360, 1070)], (2420, 1120): [(2360, 1190), (2340, 1200), (2380, 1080), (2620, 1160), (2260, 1240), (2260, 1220), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070), (2360, 1070)], (2380, 1080): [(2460, 1240), (2360, 1190), (2340, 1200), (2420, 1160), (2420, 1140), (2420, 1120), (2400, 1070), (2260, 1240), (2260, 1220), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070), (2360, 1070)], (2400, 1070): [(2380, 1080), (2520, 1110), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070), (2360, 1070), (2500, 1100)], (2520, 1110): [(2400, 1070), (2540, 1100), (2600, 1130), (2620, 1160), (2680, 1150), (2500, 1100)], (2540, 1100): [(2520, 1110), (2540, 1100), (2600, 1130), (2460, 1020), (2620, 1100), (2780, 1100), (2680, 1110), (2660, 1120), (2680, 1150), (2500, 1100), (2520, 1090), (2420, 1000)], (2600, 1130): [(2420, 1160), (2420, 1140), (2520, 1110), (2540, 1100), (2600, 1130), (2620, 1160), (2460, 1020), (2640, 1090), (2620, 1100), (2680, 1110), (2660, 1120), (2680, 1150), (2780, 1040), (2520, 1090), (2420, 1000), (2840, 1010)], (2620, 1160): [(2040, 1550), (2080, 1530), (2360, 1350), (2580, 1240), (2400, 1270), (2460, 1240), (2420, 1160), (2420, 1140), (2420, 1120), (2520, 1110), (2600, 1130), (2620, 1160), (2520, 1210), (2640, 1090), (2620, 1100), (2740, 1140), (2660, 1120), (2680, 1150), (2600, 1230), (2740, 980), (2280, 1370), (2340, 1300), (2500, 1100)], (2520, 1210): [(2640, 1270), (2660, 1260), (2040, 1550), (2080, 1530), (2360, 1350), (2580, 1240), (2600, 1250), (2400, 1270), (2460, 1240), (2360, 1190), (2420, 1160), (2620, 1160), (2520, 1210), (2680, 1150), (2600, 1230), (2620, 1240), (2280, 1370), (2340, 1300), (2180, 1140), (2180, 1120)], (2460, 1020): [(2540, 1100), (2600, 1130), (2580, 960), (2640, 990), (2640, 1090), (2620, 1100), (2860, 1120), (2780, 1100), (2660, 1120), (2680, 1150), (2520, 1090), (2420, 1000)], (2580, 960): [(2460, 1020), (2580, 960), (2640, 990), (2420, 1000), (2660, 980)], (2640, 990): [(2460, 1020), (2580, 960), (2640, 990), (2600, 1050), (2740, 980), (2660, 980)], (2640, 1090): [(2600, 1130), (2620, 1160), (2460, 1020), (2640, 1090), (2620, 1100), (2780, 1100), (2840, 1130), (2740, 1140), (2680, 1110), (2660, 1120), (2680, 1150), (2600, 1230), (2600, 1050), (2740, 980), (2800, 1090), (2880, 1090), (2780, 1040)], (2620, 1100): [(2540, 1100), (2600, 1130), (2460, 1020), (2640, 1090), (2780, 1100), (2840, 1130), (2680, 1110), (2660, 1120), (2680, 1150), (2800, 1090), (2780, 1040), (2500, 1100), (2520, 1090), (2420, 1000)], (2720, 1330): [(2580, 1320), (2600, 1330), (2600, 1350), (2580, 1360), (2640, 1290), (2700, 1280), (2660, 1300), (2760, 1390), (2820, 1420), (2520, 1390), (2700, 1340), (2740, 1340), (2700, 1240), (2760, 1250), (3020, 1480)], (2740, 1340): [(2480, 1550), (2540, 1500), (2540, 1340), (2580, 1320), (2600, 1330), (2640, 1290), (2660, 1300), (2600, 1470), (2760, 1390), (2820, 1420), (2700, 1340), (2720, 1350), (2540, 1440), (2460, 1340), (2720, 1330), (2740, 1340), (2900, 1280), (2940, 1280), (2940, 1240), (3080, 1170), (3060, 1260), (2920, 1310), (2820, 1360), (2880, 1390), (3020, 1460), (3020, 1480), (2520, 1530)], (2900, 1280): [(2540, 1500), (2600, 1470), (2760, 1390), (2720, 1350), (2540, 1440), (2740, 1340), (2900, 1280), (2940, 1280), (2940, 1240), (2960, 1190), (2980, 1160), (3020, 1300), (2960, 1310), (2920, 1310), (2820, 1360)], (2940, 1280): [(2540, 1500), (2600, 1470), (2760, 1390), (2720, 1350), (2540, 1440), (2740, 1340), (2900, 1280), (2940, 1280), (2980, 1260), (3080, 1210), (3040, 1230), (2680, 1150), (3120, 1250), (3080, 1230), (3060, 1240), (3060, 1260), (3020, 1300), (2960, 1310), (2920, 1310), (2820, 1360)], (2980, 1260): [(2540, 1500), (2700, 1280), (2600, 1470), (2760, 1390), (2940, 1280), (2980, 1260), (2940, 1240), (2960, 1190), (3080, 1170), (3080, 1210), (3040, 1230), (3080, 1130), (3080, 1230), (3060, 1240), (3060, 1260), (3020, 1300), (2960, 1310), (2920, 1310), (2820, 1360)], (2940, 1240): [(2720, 1350), (2540, 1440), (2740, 1340), (2900, 1280), (2980, 1260), (2940, 1240), (2960, 1190), (3080, 1170), (3080, 1210), (3040, 1230), (3080, 1130), (3080, 1230), (3060, 1240), (3060, 1260), (2820, 1360)], (2960, 1190): [(2900, 1280), (2980, 1260), (2940, 1240), (2960, 1190), (3080, 1170), (3080, 1210), (3040, 1230), (3140, 1160), (3080, 1130), (2940, 1160), (3060, 1120), (2980, 1160), (3060, 1240), (3060, 1260), (3020, 1300)], (3080, 1170): [(2720, 1350), (2540, 1440), (2740, 1340), (2980, 1260), (2940, 1240), (2960, 1190), (3080, 1210), (3040, 1230), (3200, 1210), (3140, 1160), (2960, 1310)], (3080, 1210): [(2540, 1500), (2600, 1470), (2760, 1390), (2940, 1280), (2980, 1260), (2940, 1240), (2960, 1190), (3040, 1230), (3140, 1240), (3200, 1210), (3120, 1250), (3080, 1230), (3060, 1240), (3020, 1300), (2960, 1310), (2920, 1310), (2820, 1360)], (3040, 1230): [(2540, 1500), (2600, 1470), (2760, 1390), (2940, 1280), (2980, 1260), (2940, 1240), (2960, 1190), (3080, 1170), (3080, 1210), (3040, 1230), (3080, 1130), (3080, 1230), (3060, 1240), (3060, 1260), (3020, 1300), (2960, 1310), (2920, 1310), (2820, 1360), (2880, 1390)], (3140, 1240): [(3080, 1210), (3200, 1210), (3120, 1250), (3080, 1230)], (3200, 1210): [(3080, 1170), (3080, 1210), (3140, 1240), (3200, 1210), (3140, 1160), (3120, 1250)], (3140, 1160): [(2960, 1190), (3080, 1170), (3200, 1210), (3140, 1160), (3080, 1130), (2980, 1080), (3060, 1120), (2840, 1010)], (3080, 1130): [(2980, 1260), (2940, 1240), (2960, 1190), (3040, 1230), (3140, 1160), (2980, 1080), (3060, 1120), (2980, 1160), (2840, 1010), (2960, 1310)], (2940, 1160): [(2600, 1330), (2700, 1280), (2660, 1300), (2960, 1190), (2940, 1160), (2860, 1120), (2600, 1230), (2760, 1250), (2980, 1160), (2840, 1110), (2800, 1090), (2860, 1100), (2780, 1040)], (2860, 1120): [(2460, 1020), (2940, 1160), (2860, 1120), (2780, 1100), (2840, 1130), (2700, 1240), (2600, 1050), (3060, 1120), (2980, 1160), (2840, 1110), (2800, 1090)], (2780, 1100): [(2540, 1100), (2460, 1020), (2640, 1090), (2620, 1100), (2860, 1120), (2780, 1100), (2840, 1130), (2740, 1140), (2680, 1110), (2600, 1050), (2740, 980), (2840, 1110), (2800, 1090), (2500, 1100)], (2840, 1130): [(2640, 1090), (2620, 1100), (2860, 1120), (2780, 1100), (2840, 1130), (2740, 1140), (2680, 1110), (2600, 1050), (2800, 1090), (2860, 1100), (2520, 1090)], (2740, 1140): [(2420, 1140), (2620, 1160), (2640, 1090), (2780, 1100), (2840, 1130), (2740, 1140), (2680, 1110), (2660, 1120), (2680, 1150), (2600, 1050), (2780, 1040), (2180, 1140)], (2680, 1110): [(2540, 1100), (2600, 1130), (2640, 1090), (2620, 1100), (2780, 1100), (2840, 1130), (2740, 1140), (2660, 1120), (2600, 1050), (2740, 980), (2800, 1090), (2780, 1040), (2520, 1090)], (2660, 1120): [(2580, 1240), (2420, 1160), (2540, 1100), (2600, 1130), (2620, 1160), (2460, 1020), (2640, 1090), (2620, 1100), (2740, 1140), (2680, 1110), (2680, 1150), (2600, 1230), (2740, 980), (2780, 1040), (2520, 1090), (2420, 1000)], (2680, 1150): [(2040, 1550), (2360, 1350), (2580, 1240), (2400, 1270), (2460, 1240), (2520, 1110), (2540, 1100), (2600, 1130), (2620, 1160), (2520, 1210), (2460, 1020), (2640, 1090), (2620, 1100), (2940, 1280), (2740, 1140), (2660, 1120), (2600, 1230), (2280, 1370), (2340, 1300), (2520, 1090), (2420, 1000)], (2600, 1230): [(2600, 1330), (2600, 1350), (2640, 1290), (2640, 1270), (2660, 1260), (2700, 1280), (2360, 1350), (2580, 1240), (2600, 1250), (2400, 1270), (2460, 1240), (2360, 1190), (2620, 1160), (2520, 1210), (2640, 1090), (2940, 1160), (2660, 1120), (2680, 1150), (2620, 1240), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (2260, 1380), (2280, 1370), (2340, 1300), (2180, 1140)], (2620, 1240): [(2540, 1340), (2580, 1320), (2600, 1330), (2600, 1350), (2640, 1290), (2640, 1270), (2660, 1260), (2700, 1280), (2440, 1390), (2480, 1370), (2580, 1240), (2600, 1250), (2460, 1340), (2460, 1240), (2360, 1190), (2340, 1240), (2520, 1210), (2600, 1230), (2700, 1240), (2760, 1250), (2260, 1240), (2180, 1140), (2180, 1120)], (2700, 1240): [(2640, 1270), (2660, 1260), (2340, 1400), (2720, 1350), (2580, 1240), (2600, 1250), (2460, 1340), (2400, 1370), (2460, 1240), (2340, 1240), (2720, 1330), (2860, 1120), (2620, 1240), (2760, 1250), (2260, 1240)], (2760, 1250): [(2600, 1330), (2600, 1350), (2660, 1260), (2700, 1280), (2660, 1300), (2700, 1340), (2580, 1240), (2600, 1250), (2720, 1330), (2940, 1160), (2620, 1240), (2700, 1240), (2760, 1250)], (2600, 1050): [(2640, 990), (2640, 1090), (2860, 1120), (2780, 1100), (2840, 1130), (2740, 1140), (2680, 1110), (2600, 1050), (2740, 980), (2840, 1110), (2800, 1090), (2860, 1100), (2880, 1090), (2780, 1040), (2660, 980)], (2740, 980): [(2580, 1240), (2620, 1160), (2640, 990), (2640, 1090), (2780, 1100), (2680, 1110), (2660, 1120), (2600, 1050), (2740, 980), (2840, 1030), (2900, 1060), (2980, 1080), (2800, 1090), (2780, 1040), (2660, 980), (2840, 1010)], (2840, 1030): [(2740, 980), (2840, 1030), (2900, 1060), (2980, 1080), (2780, 1040), (2840, 1010)], (2900, 1060): [(2740, 980), (2840, 1030), (2900, 1060), (2980, 1080), (2880, 1090), (2840, 1010)], (2980, 1080): [(3140, 1160), (3080, 1130), (2740, 980), (2840, 1030), (2900, 1060), (2980, 1080), (3060, 1120), (2840, 1010)], (3060, 1120): [(2960, 1190), (3140, 1160), (3080, 1130), (2860, 1120), (2980, 1080), (3060, 1120), (2980, 1160), (2840, 1010)], (2980, 1160): [(2900, 1280), (2960, 1190), (3080, 1130), (2940, 1160), (2860, 1120), (3060, 1120), (2840, 1110), (2860, 1100)], (2840, 1110): [(2940, 1160), (2860, 1120), (2780, 1100), (2600, 1050), (2980, 1160), (2840, 1110), (2800, 1090), (2860, 1100), (2880, 1090), (2780, 1040)], (2800, 1090): [(2640, 1090), (2620, 1100), (2940, 1160), (2860, 1120), (2780, 1100), (2840, 1130), (2680, 1110), (2600, 1050), (2740, 980), (2840, 1110), (2860, 1100), (2880, 1090), (2780, 1040)], (2860, 1100): [(2940, 1160), (2840, 1130), (2600, 1050), (2980, 1160), (2840, 1110), (2800, 1090), (2860, 1100), (2880, 1090), (2780, 1040)], (2880, 1090): [(2640, 1090), (2600, 1050), (2900, 1060), (2840, 1110), (2800, 1090), (2860, 1100), (2880, 1090), (2780, 1040)], (2780, 1040): [(2600, 1130), (2640, 1090), (2620, 1100), (2940, 1160), (2740, 1140), (2680, 1110), (2660, 1120), (2600, 1050), (2740, 980), (2840, 1030), (2840, 1110), (2800, 1090), (2860, 1100), (2880, 1090), (2840, 1010)], (1820, 1620): [(2640, 1270), (2660, 1260), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2160, 1610), (2360, 1350), (2580, 1240), (2400, 1370), (2600, 1230), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (2260, 1380), (2280, 1370), (2260, 1620), (2040, 1710), (2000, 1710)], (1820, 1600): [(2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2160, 1610), (2360, 1350), (2580, 1240), (2400, 1370), (2600, 1230), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (2260, 1380), (2280, 1370), (2260, 1620), (2040, 1710), (2000, 1710)], (1980, 1520): [(2580, 1320), (2640, 1290), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2160, 1610), (2360, 1350), (2580, 1240), (2400, 1370), (2600, 1230), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (2260, 1380), (2280, 1370), (2040, 1710), (2000, 1710)], (2020, 1500): [(2020, 1460), (1980, 1440), (2060, 1440), (2180, 1380), (2140, 1400), (2120, 1390), (2100, 1400), (2580, 1320), (2640, 1290), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2200, 1590), (2360, 1350), (2580, 1240), (2400, 1370), (2600, 1230), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (1920, 1430), (1920, 1410), (1940, 1380), (2260, 1380), (2280, 1370), (2260, 1620), (2040, 1710), (2000, 1710)], (1920, 1430): [(2020, 1460), (1980, 1440), (1980, 1420), (2020, 1400), (2060, 1380), (2100, 1360), (2080, 1530), (2020, 1500), (1920, 1430), (1920, 1410), (1940, 1380), (2020, 1340), (2080, 1330), (2120, 1330)], (1920, 1410): [(2020, 1460), (1980, 1440), (1980, 1420), (2020, 1400), (2060, 1380), (2100, 1360), (2080, 1530), (2360, 1190), (2340, 1200), (2420, 1160), (2020, 1500), (1920, 1430), (1920, 1410), (1940, 1380), (2020, 1340), (2080, 1330), (2120, 1330), (2260, 1240)], (1940, 1380): [(1980, 1440), (1980, 1420), (2020, 1400), (2060, 1380), (2100, 1360), (2180, 1380), (2100, 1400), (2420, 1140), (2020, 1500), (1920, 1430), (1920, 1410), (1940, 1380), (2020, 1340), (2080, 1330), (2120, 1330), (2260, 1380), (2260, 1220)], (2020, 1340): [(1980, 1420), (2060, 1420), (2060, 1380), (2100, 1360), (2140, 1360), (2420, 1140), (1920, 1430), (1920, 1410), (1940, 1380), (2080, 1330), (2120, 1330), (2260, 1380), (2260, 1220)], (2080, 1330): [(1980, 1420), (2020, 1400), (2060, 1380), (2100, 1360), (2140, 1360), (2180, 1380), (2120, 1390), (2320, 1410), (2360, 1190), (2340, 1200), (2420, 1160), (1920, 1430), (1920, 1410), (1940, 1380), (2020, 1340), (2120, 1330), (2260, 1380), (2260, 1240)], (2120, 1330): [(1980, 1420), (2020, 1400), (2060, 1380), (2100, 1360), (2140, 1360), (2180, 1380), (2320, 1410), (1920, 1430), (1920, 1410), (1940, 1380), (2020, 1340), (2080, 1330), (2260, 1380)], (2260, 1380): [(2020, 1460), (2060, 1420), (2060, 1440), (2060, 1380), (2140, 1360), (2180, 1380), (2140, 1400), (2520, 1510), (2420, 1460), (2580, 1360), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2400, 1450), (2440, 1390), (2480, 1370), (2540, 1440), (2360, 1350), (2580, 1240), (2400, 1370), (2600, 1230), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (1940, 1380), (2020, 1340), (2080, 1330), (2120, 1330), (2260, 1380), (2280, 1370)], (2280, 1370): [(2540, 1500), (2440, 1450), (2600, 1470), (2660, 1500), (2040, 1550), (2080, 1530), (2320, 1410), (2340, 1400), (2420, 1440), (2440, 1390), (2480, 1370), (2540, 1440), (2360, 1350), (2580, 1240), (2400, 1370), (2400, 1270), (2460, 1240), (2620, 1160), (2520, 1210), (2680, 1150), (2600, 1230), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (2260, 1380), (2280, 1370), (2340, 1300), (2840, 1570), (2780, 1580), (2560, 1510)], (2340, 1300): [(2320, 1410), (2340, 1400), (2360, 1350), (2580, 1240), (2400, 1270), (2460, 1240), (2620, 1160), (2520, 1210), (2680, 1150), (2600, 1230), (2280, 1370), (2340, 1300), (2260, 1240), (2260, 1220), (2260, 1200), (2280, 1070), (2320, 1070)], (2260, 1240): [(2580, 1240), (2400, 1270), (2460, 1240), (2360, 1190), (2340, 1200), (2340, 1220), (2340, 1240), (2420, 1160), (2420, 1140), (2420, 1120), (2380, 1080), (2620, 1240), (2700, 1240), (1920, 1410), (2080, 1330), (2340, 1300), (2260, 1240), (2260, 1220), (2260, 1200), (2280, 1070), (2320, 1070), (2360, 1070)], (2260, 1220): [(2400, 1270), (2460, 1240), (2360, 1190), (2340, 1200), (2340, 1220), (2340, 1240), (2420, 1160), (2420, 1140), (2420, 1120), (2380, 1080), (1940, 1380), (2020, 1340), (2340, 1300), (2260, 1240), (2260, 1220), (2260, 1200), (2280, 1070), (2320, 1070), (2360, 1070)], (2260, 1200): [(2400, 1270), (2360, 1190), (2340, 1200), (2340, 1220), (2340, 1240), (2420, 1160), (2420, 1140), (2420, 1120), (2380, 1080), (2340, 1300), (2260, 1240), (2260, 1220), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070), (2360, 1070)], (2180, 1140): [(2660, 1260), (2580, 1240), (2360, 1190), (2340, 1200), (2340, 1220), (2340, 1240), (2420, 1160), (2420, 1140), (2420, 1120), (2380, 1080), (2400, 1070), (2520, 1210), (2740, 1140), (2600, 1230), (2620, 1240), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070), (2360, 1070)], (2180, 1120): [(2660, 1260), (2580, 1240), (2360, 1190), (2340, 1200), (2340, 1220), (2340, 1240), (2420, 1160), (2420, 1140), (2420, 1120), (2380, 1080), (2400, 1070), (2520, 1210), (2620, 1240), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070), (2360, 1070)], (2280, 1070): [(2360, 1350), (2460, 1240), (2360, 1190), (2340, 1200), (2340, 1220), (2340, 1240), (2420, 1160), (2420, 1140), (2420, 1120), (2380, 1080), (2400, 1070), (2340, 1300), (2260, 1240), (2260, 1220), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070), (2360, 1070)], (2320, 1070): [(2460, 1240), (2360, 1190), (2340, 1200), (2340, 1220), (2340, 1240), (2420, 1160), (2420, 1140), (2420, 1120), (2380, 1080), (2400, 1070), (2340, 1300), (2260, 1240), (2260, 1220), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070), (2360, 1070)], (2360, 1070): [(2460, 1240), (2360, 1190), (2340, 1200), (2420, 1160), (2420, 1140), (2420, 1120), (2380, 1080), (2400, 1070), (2260, 1240), (2260, 1220), (2260, 1200), (2180, 1140), (2180, 1120), (2280, 1070), (2320, 1070), (2360, 1070)], (2500, 1100): [(2400, 1070), (2520, 1110), (2540, 1100), (2620, 1160), (2620, 1100), (2780, 1100), (2520, 1090)], (2520, 1090): [(2540, 1100), (2600, 1130), (2460, 1020), (2620, 1100), (2840, 1130), (2680, 1110), (2660, 1120), (2680, 1150), (2500, 1100), (2520, 1090), (2420, 1000)], (2420, 1000): [(2540, 1100), (2600, 1130), (2460, 1020), (2580, 960), (2620, 1100), (2660, 1120), (2680, 1150), (2520, 1090)], (2660, 980): [(2580, 960), (2640, 990), (2600, 1050), (2740, 980)], (2840, 1010): [(2600, 1130), (3140, 1160), (3080, 1130), (2740, 980), (2840, 1030), (2900, 1060), (2980, 1080), (3060, 1120), (2780, 1040), (2840, 1010)], (3120, 1250): [(2940, 1280), (3080, 1210), (3140, 1240), (3200, 1210), (3120, 1250), (3080, 1230), (3060, 1240), (3060, 1260)], (3080, 1230): [(2400, 1570), (2480, 1530), (2520, 1510), (2540, 1500), (2600, 1470), (2760, 1390), (2540, 1440), (2940, 1280), (2980, 1260), (2940, 1240), (3040, 1230), (3140, 1240), (3120, 1250), (3060, 1240), (2920, 1310), (2820, 1360)], (3060, 1240): [(2400, 1570), (2480, 1530), (2520, 1510), (2540, 1500), (2600, 1470), (2760, 1390), (2540, 1440), (2940, 1280), (2980, 1260), (2940, 1240), (2960, 1190), (3080, 1210), (3040, 1230), (3120, 1250), (3080, 1230), (3020, 1300), (2960, 1310), (2920, 1310), (2820, 1360)], (3060, 1260): [(2720, 1350), (2540, 1440), (2740, 1340), (2940, 1280), (2980, 1260), (2940, 1240), (2960, 1190), (3040, 1230), (3120, 1250), (3020, 1300), (2960, 1310), (2920, 1310)], (3020, 1300): [(2900, 1280), (2940, 1280), (2980, 1260), (2960, 1190), (3080, 1210), (3040, 1230), (3060, 1240), (3060, 1260), (2960, 1310), (2920, 1310), (2880, 1390)], (2960, 1310): [(2900, 1280), (2940, 1280), (2980, 1260), (3080, 1170), (3080, 1210), (3040, 1230), (3080, 1130), (3060, 1240), (3060, 1260), (3020, 1300), (2960, 1310), (2920, 1310), (2880, 1390)], (2920, 1310): [(2400, 1570), (2480, 1530), (2520, 1510), (2540, 1500), (2600, 1470), (2760, 1390), (2720, 1350), (2540, 1440), (2740, 1340), (2900, 1280), (2940, 1280), (2980, 1260), (3080, 1210), (3040, 1230), (3080, 1230), (3060, 1240), (3060, 1260), (3020, 1300), (2960, 1310), (2920, 1310), (2820, 1360), (2880, 1390)], (2820, 1360): [(2400, 1570), (2480, 1530), (2520, 1510), (2540, 1500), (2580, 1320), (2600, 1470), (2760, 1390), (2820, 1420), (2700, 1340), (2720, 1350), (2540, 1440), (2740, 1340), (2900, 1280), (2940, 1280), (2980, 1260), (2940, 1240), (3080, 1210), (3040, 1230), (3080, 1230), (3060, 1240), (2920, 1310), (2880, 1390), (3020, 1460), (3020, 1480), (2840, 1570)], (2880, 1390): [(2760, 1390), (2820, 1420), (2660, 1500), (2700, 1340), (2720, 1350), (2740, 1340), (3040, 1230), (3020, 1300), (2960, 1310), (2920, 1310), (2820, 1360), (3020, 1460), (3020, 1480), (2840, 1570), (2780, 1580)], (3020, 1460): [(2760, 1390), (2820, 1420), (2660, 1500), (2700, 1340), (2720, 1350), (2740, 1340), (2820, 1360), (2880, 1390), (2840, 1570), (2780, 1580)], (3020, 1480): [(2520, 1510), (2640, 1290), (2660, 1300), (2760, 1390), (2820, 1420), (2660, 1500), (2700, 1340), (2720, 1350), (2720, 1330), (2740, 1340), (2820, 1360), (2880, 1390), (2840, 1570), (2780, 1580), (2560, 1510)], (2840, 1570): [(2540, 1500), (2440, 1450), (2820, 1420), (2660, 1500), (2340, 1400), (2420, 1440), (2280, 1370), (2820, 1360), (2880, 1390), (3020, 1460), (3020, 1480), (2840, 1570), (2780, 1580), (2560, 1510)], (2780, 1580): [(2540, 1500), (2440, 1450), (2420, 1460), (2600, 1470), (2820, 1420), (2660, 1500), (2340, 1400), (2420, 1440), (2440, 1390), (2540, 1440), (2360, 1350), (2400, 1370), (2280, 1370), (2880, 1390), (3020, 1460), (3020, 1480), (2840, 1570), (2780, 1580), (2560, 1510)], (2560, 1510): [(2440, 1510), (2480, 1530), (2480, 1550), (2420, 1580), (2520, 1510), (2540, 1500), (2440, 1450), (2600, 1470), (2660, 1500), (2340, 1400), (2420, 1440), (2440, 1390), (2720, 1350), (2540, 1440), (2360, 1350), (2400, 1370), (2280, 1370), (3020, 1480), (2840, 1570), (2780, 1580), (2560, 1510), (2520, 1530)], (2520, 1530): [(2440, 1510), (2480, 1530), (2480, 1550), (2420, 1580), (2520, 1510), (2540, 1500), (2420, 1460), (2600, 1470), (2400, 1450), (2360, 1450), (2720, 1350), (2740, 1340), (2560, 1510), (2500, 1560)], (2500, 1560): [(2420, 1520), (2480, 1530), (2480, 1550), (2420, 1580), (2520, 1510), (2540, 1500), (2520, 1530), (2260, 1620)], (2260, 1620): [(2280, 1570), (2320, 1550), (2220, 1540), (2400, 1570), (2420, 1540), (2420, 1520), (2420, 1580), (2420, 1460), (2080, 1530), (2420, 1440), (2200, 1590), (2160, 1610), (1820, 1620), (1820, 1600), (2020, 1500), (2500, 1560), (2260, 1620), (2040, 1710), (2000, 1710)], (2040, 1710): [(2280, 1570), (2320, 1550), (2020, 1460), (2420, 1540), (2420, 1520), (2440, 1510), (2200, 1590), (2160, 1610), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (2260, 1620), (2000, 1710)], (2000, 1710): [(2280, 1570), (2320, 1550), (2060, 1440), (2400, 1570), (2420, 1540), (2420, 1520), (2440, 1510), (2040, 1550), (2200, 1590), (2160, 1610), (1820, 1620), (1820, 1600), (1980, 1520), (2020, 1500), (2260, 1620), (2040, 1710)]}

def dijkstra_pathfinding(start, end):

    #check if player is already at destination
    if start == end:
        return []

    visitableNodes = {start: 0.0}
    visitedNodes = set()
    pathsToNodes = {start: ([start], 0.0)}

    while len(visitableNodes) > 0:
        
        #pick new node to look through
        currentNode = findCheapestOption(visitableNodes)
        
        #mark this node as visited
        visitedNodes.add(currentNode)
        
        #add all this node's connections to the visitable node list with their weight from currentNode
        for elem in MapGraph.get(currentNode):

            pathSoFar = pathsToNodes.get(currentNode)
            
            if not elem in visitedNodes:
                newDistance = sqrt((elem[0] - currentNode[0])**2 + (elem[1] - currentNode[1])**2)
                
                visitableNodes[elem] = newDistance

                if currentNode == start:
                    pathsToNodes[elem] = ([currentNode], newDistance)
                
                else:
                    alreadyHasPath = elem in pathsToNodes.keys()
                    
                    if not alreadyHasPath:
                        pathsToNodes[elem] = (pathSoFar[0] + [currentNode], pathSoFar[1] + newDistance)

                    #WHEN ADDING PATHS TO THE DICT, I NEED TO KEEP TRACK OF HOW LONG THEY ARE AND NOT UPDATE THEM IF THEY'RE STRAIGHT UP WORSE
                    elif alreadyHasPath and pathsToNodes.get(elem)[1] > pathSoFar[1] + newDistance:
                        pathsToNodes[elem] = (pathSoFar[0] + [currentNode], pathSoFar[1] + newDistance)

        #mark current node as no longer visitable
        visitableNodes.pop(currentNode)

    #returns None if no path can be found
    return pathsToNodes.get(end)





#finds cheapest node within a list of options (formatted as: {n1: 0.0, n2: 0.0, n3: 0.0, ...})
def findCheapestOption(optionsList):
    cheapestCost = min(optionsList.values())

    for key in optionsList.keys():
        if optionsList.get(key) == cheapestCost:
            return key


#LOS FUNCTIONS
#List of all walls, and pre calculated values
allWallEdgesList=[[(2820, 1020), (2740, 980), (2960, 1090), (2800, 1090), (2840, 1110), (2860, 1100), (2880, 1130), (2860, 1120), (2840, 1130), (3120, 1150), (3080, 1130), (2960, 1190), (3120, 1230), (3080, 1210), (2920, 1070), (2900, 1060), (2880, 1070), (2820, 1040), (2840, 1030), (2820, 1020), (2780, 1040), (2880, 1090), (2980, 1160), (2900, 1120), (2980, 1080), (3060, 1120), (3120, 1230), (3160, 1210), (3080, 1170), (3120, 1150), (3140, 1160), (3120, 1170), (3200, 1210), (3140, 1240), (2600, 1230), (2720, 1170), (2680, 1150), (2700, 1140), (2660, 1120), (2680, 1110), (2740, 1140), (2720, 1150), (2780, 1180), (2880, 1130), (2940, 1160), (2840, 1210), (2920, 1250), (2940, 1240), (2980, 1260), (2940, 1280), (2920, 1270), (2900, 1280), (2880, 1270), (2740, 1340), (2720, 1330), (2840, 1270), (2780, 1240), (2760, 1250), (2720, 1230), (2700, 1240), (2660, 1220), (2620, 1240), (2460, 1020), (2580, 960), (2640, 990), (2540, 1040), (2640, 1090), (2620, 1100), (2520, 1110), (2540, 1100), (2600, 1130), (2580, 1140), (2620, 1160), (2520, 1210), (2420, 1160), (2440, 1150), (2420, 1140), (2440, 1130), (2420, 1120), (2440, 1110), (2380, 1080), (2400, 1070), (2520, 1130), (2540, 1120), (2040, 1550), (2080, 1530), (2100, 1540), (2340, 1420), (2320, 1410), (2340, 1400), (2420, 1440), (2400, 1450), (2380, 1440), (2360, 1450), (2340, 1440), (2120, 1550), (2200, 1590), (2160, 1610), (2340, 1240), (2360, 1230), (2340, 1220), (2360, 1210), (2340, 1200), (2360, 1190), (2460, 1240), (2400, 1270), (2360, 1350), (2400, 1370), (2460, 1340), (2440, 1330), (2600, 1250), (2580, 1240), (2640, 1270), (2660, 1260), (2700, 1280), (2660, 1300), (2640, 1290), (2660, 1280), (2540, 1340), (2580, 1320), (2600, 1330), (2580, 1340), (2600, 1350), (2580, 1360), (2440, 1390), (2480, 1370), (2520, 1390), (2500, 1400), (2540, 1420), (2700, 1340), (2720, 1350), (2540, 1440), (2660, 1500), (2820, 1420), (2760, 1390), (2600, 1470), (2420, 1460), (2440, 1450), (2540, 1500), (2520, 1510), (2400, 1570), (2440, 1550), (2420, 1540), (2440, 1530), (2420, 1520), (2440, 1510), (2480, 1530), (2460, 1540), (2480, 1550), (2420, 1580), (2220, 1540), (2260, 1520), (2320, 1550), (2280, 1570), (2100, 1400), (2060, 1380), (2100, 1360), (2120, 1370), (2140, 1360), (2180, 1380), (2140, 1400), (2120, 1390), (1980, 1440), (2000, 1430), (1980, 1420), (2020, 1400), (2060, 1420), (2040, 1430), (2060, 1440), (2020, 1460), (1800, 1630), (1820, 1620), (1800, 1610), (1820, 1600), (1800, 1590), (1960, 1510), (1980, 1520), (2020, 1500), (1900, 1440), (1920, 1430), (1900, 1420), (1920, 1410), (1900, 1400), (1940, 1380), (1920, 1370), (2000, 1330), (2020, 1340), (2060, 1320), (2080, 1330), (2100, 1320), (2120, 1330), (2140, 1320), (2260, 1380), (2280, 1370), (2240, 1350), (2340, 1300), (2240, 1250), (2260, 1240), (2240, 1230), (2260, 1220), (2240, 1210), (2260, 1200), (2160, 1150), (2180, 1140), (2160, 1130), (2180, 1120), (2160, 1110), (2260, 1060), (2280, 1070), (2300, 1060), (2320, 1070), (2340, 1060), (2360, 1070), (2400, 1050), (2500, 1100), (2520, 1090), (2340, 1000), (2380, 980), (2420, 1000), (2560, 930), (2660, 980), (2720, 950), (2840, 1010), (2880, 990), (3280, 1190), (3120, 1270), (3100, 1260), (3120, 1250), (3080, 1230), (3060, 1240), (3080, 1250), (3060, 1260), (3100, 1280), (3040, 1310), (3020, 1300), (2980, 1320), (2960, 1310), (2940, 1320), (2920, 1310), (2820, 1360), (2880, 1390), (2900, 1380), (3040, 1450), (3020, 1460), (3040, 1470), (3020, 1480), (3040, 1490), (2860, 1580), (2840, 1570), (2800, 1590), (2780, 1580), (2740, 1600), (2560, 1510), (2520, 1530), (2540, 1540), (2500, 1560), (2520, 1570), (2340, 1660), (2260, 1620), (2060, 1720), (2040, 1710), (2020, 1720), (2000, 1710), (1980, 1720)], 
                  [(2740, 980), (2600, 1050), (2920, 1070), (2840, 1110), (2860, 1100), (2900, 1120), (2860, 1120), (2840, 1130), (2780, 1100), (3080, 1130), (2960, 1190), (2920, 1170), (3080, 1210), (3040, 1230), (2900, 1060), (2880, 1070), (2820, 1040), (2840, 1030), (2820, 1020), (2780, 1040), (2880, 1090), (2920, 1070), (2900, 1120), (2980, 1080), (3060, 1120), (2980, 1160), (3160, 1210), (3080, 1170), (3120, 1150), (3140, 1160), (3120, 1170), (3200, 1210), (3140, 1240), (3120, 1230), (2720, 1170), (2680, 1150), (2700, 1140), (2660, 1120), (2680, 1110), (2740, 1140), (2720, 1150), (2780, 1180), (2880, 1130), (2940, 1160), (2840, 1210), (2920, 1250), (2940, 1240), (2980, 1260), (2940, 1280), (2920, 1270), (2900, 1280), (2880, 1270), (2740, 1340), (2720, 1330), (2840, 1270), (2780, 1240), (2760, 1250), (2720, 1230), (2700, 1240), (2660, 1220), (2620, 1240), (2600, 1230), (2580, 960), (2640, 990), (2540, 1040), (2640, 1090), (2620, 1100), (2460, 1020), (2540, 1100), (2600, 1130), (2580, 1140), (2620, 1160), (2520, 1210), (2420, 1160), (2440, 1150), (2420, 1140), (2440, 1130), (2420, 1120), (2440, 1110), (2380, 1080), (2400, 1070), (2520, 1130), (2540, 1120), (2520, 1110), (2080, 1530), (2100, 1540), (2340, 1420), (2320, 1410), (2340, 1400), (2420, 1440), (2400, 1450), (2380, 1440), (2360, 1450), (2340, 1440), (2120, 1550), (2200, 1590), (2160, 1610), (2040, 1550), (2360, 1230), (2340, 1220), (2360, 1210), (2340, 1200), (2360, 1190), (2460, 1240), (2400, 1270), (2340, 1240), (2400, 1370), (2460, 1340), (2440, 1330), (2600, 1250), (2580, 1240), (2360, 1350), (2660, 1260), (2700, 1280), (2660, 1300), (2640, 1290), (2660, 1280), (2640, 1270), (2580, 1320), (2600, 1330), (2580, 1340), (2600, 1350), (2580, 1360), (2540, 1340), (2480, 1370), (2520, 1390), (2500, 1400), (2540, 1420), (2700, 1340), (2720, 1350), (2540, 1440), (2440, 1390), (2820, 1420), (2760, 1390), (2600, 1470), (2660, 1500), (2440, 1450), (2540, 1500), (2520, 1510), (2420, 1460), (2440, 1550), (2420, 1540), (2440, 1530), (2420, 1520), (2440, 1510), (2480, 1530), (2460, 1540), (2480, 1550), (2420, 1580), (2400, 1570), (2260, 1520), (2320, 1550), (2280, 1570), (2220, 1540), (2060, 1380), (2100, 1360), (2120, 1370), (2140, 1360), (2180, 1380), (2140, 1400), (2120, 1390), (2100, 1400), (2000, 1430), (1980, 1420), (2020, 1400), (2060, 1420), (2040, 1430), (2060, 1440), (2020, 1460), (1980, 1440), (1820, 1620), (1800, 1610), (1820, 1600), (1800, 1590), (1960, 1510), (1980, 1520), (2020, 1500), (1900, 1440), (1920, 1430), (1900, 1420), (1920, 1410), (1900, 1400), (1940, 1380), (1920, 1370), (2000, 1330), (2020, 1340), (2060, 1320), (2080, 1330), (2100, 1320), (2120, 1330), (2140, 1320), (2260, 1380), (2280, 1370), (2240, 1350), (2340, 1300), (2240, 1250), (2260, 1240), (2240, 1230), (2260, 1220), (2240, 1210), (2260, 1200), (2160, 1150), (2180, 1140), (2160, 1130), (2180, 1120), (2160, 1110), (2260, 1060), (2280, 1070), (2300, 1060), (2320, 1070), (2340, 1060), (2360, 1070), (2400, 1050), (2500, 1100), (2520, 1090), (2340, 1000), (2380, 980), (2420, 1000), (2560, 930), (2660, 980), (2720, 950), (2840, 1010), (2880, 990), (3280, 1190), (3120, 1270), (3100, 1260), (3120, 1250), (3080, 1230), (3060, 1240), (3080, 1250), (3060, 1260), (3100, 1280), (3040, 1310), (3020, 1300), (2980, 1320), (2960, 1310), (2940, 1320), (2920, 1310), (2820, 1360), (2880, 1390), (2900, 1380), (3040, 1450), (3020, 1460), (3040, 1470), (3020, 1480), (3040, 1490), (2860, 1580), (2840, 1570), (2800, 1590), (2780, 1580), (2740, 1600), (2560, 1510), (2520, 1530), (2540, 1540), (2500, 1560), (2520, 1570), (2340, 1660), (2260, 1620), (2060, 1720), (2040, 1710), (2020, 1720), (2000, 1710), (1980, 1720), (1800, 1630)]]

allWallEdgesMatrix = np.array(allWallEdgesList)
allWallEdgeMatrixMathPreCalcA = np.subtract(allWallEdgesMatrix[1,:,0],allWallEdgesMatrix[0,:,0])
allWallEdgeMatrixMathPreCalcB = np.subtract(np.multiply(allWallEdgesMatrix[0,:,1],allWallEdgesMatrix[1,:,0]),np.multiply(allWallEdgesMatrix[1,:,1],allWallEdgesMatrix[0,:,0]))
allWallEdgeMatrixMathPreCalcC = np.subtract(allWallEdgesMatrix[1,:,1],allWallEdgesMatrix[0,:,1])

# WARNING!!!!!!   Line indicated below can not detect wall when target and origin are horizontal
#                    v v both are (x,y)
def lineOfSight(origin,target):
    
    
    if (target[0]==origin[0]):
        target=(target[0]+0.001,target[1])
    
    deltaXIntermediate = target[0]-origin[0]
    #vvThis line is at fault
    xThresh = np.divide(np.subtract(np.multiply(deltaXIntermediate,allWallEdgeMatrixMathPreCalcB),np.multiply(allWallEdgeMatrixMathPreCalcA,(origin[1]*target[0]-origin[0]*target[1]))),np.subtract(   np.multiply(allWallEdgeMatrixMathPreCalcA,(target[1]-origin[1]))    ,    np.multiply(allWallEdgeMatrixMathPreCalcC,deltaXIntermediate)     ))
    isNotInLineOfSight = 0 != np.add(np.multiply(np.full((len(xThresh)),origin[0])<=xThresh, np.full((len(xThresh)),target[0])>=xThresh), np.multiply(np.full((len(xThresh)),origin[0])>=xThresh, np.full((len(xThresh)),target[0])<=xThresh))                                   &                                np.add(          np.multiply(allWallEdgesMatrix[0,:,0]<xThresh , allWallEdgesMatrix[1,:,0]>xThresh)      ,      np.multiply(allWallEdgesMatrix[0,:,0]>xThresh, allWallEdgesMatrix[1,:,0]<xThresh)         )    
    
    isAnyNotInLineOfSignt = isNotInLineOfSight.any()
    contactCoord=(0,0)

    isAnyInLineOfSignt = not(isAnyNotInLineOfSignt)

    if isAnyNotInLineOfSignt:
        distToAllActiveXThresh=np.divide(1,np.add(1,np.multiply(np.multiply(np.subtract(xThresh,target[0]),np.subtract(xThresh,target[0])),isNotInLineOfSight)))
        indexOfHitWall = np.argmin(distToAllActiveXThresh)
        yOfxThresh = ((target[1]-origin[1])/(target[0]-origin[0])) * (xThresh[indexOfHitWall]-origin[0])+origin[1]
        contactCoord = (xThresh[indexOfHitWall],yOfxThresh)

        #vv Bool of if in LOS        v Coords if in LOS
    return isAnyInLineOfSignt , contactCoord #, indexOfHitWall 



#====================================================================================================================================================================================
#Testing functions

# maybe = dijkstra_pathfinding((1820, 1620), (3200, 1210))
# print("\nShortest Path:")
# print(maybe)